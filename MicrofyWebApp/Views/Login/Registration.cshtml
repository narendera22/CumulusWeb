@{
    Layout = "";
    ViewData["Title"] = "SignUp";

}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Welcome to Cumulus</title>
    <link rel="stylesheet" href="~/lib/jquery/dist/css/jquery-confirm.css" />

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="~/css/site.css" />
    <style type="text/css">
        .input-group-addon {
            padding: 6px 20px !important;
        }
        /*.jconfirm .jconfirm-holder {*/
        /*max-height: 100%;*/
        /*padding-right: 250px !important;
        }*/
        .justify-content-lg-center {
            justify-content: right !important;
        }
    </style>
</head>
<body>
    <div class="container" style="padding-left:60px">
        <form class="well form-horizontal" action=" " method="post" id="Registration_form">
            <fieldset>
                <div class="imglogo" style="display:flex;">
                    <img id="img_logo" alt="Logo" src="~/Image/Cumulus.png" onclick="@("window.location.href='" + @Url.Action("Login", "Login") + "'");" />
                    <div class=" col-lg-8" style="padding-top:40px">
                        <center><h2><b>Sign-up</b></h2></center>
                    </div>
                </div>
                <!-- Form Name -->
                <!-- Text input-->

                <div class="form-group">
                    <label class="col-md-4 control-label"><span style="color:red;">*</span>  Full Name</label>
                    <div class="col-md-4 inputGroupContainer">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="first_name" id="first_name" placeholder="User Name" class="form-control" type="text" required>
                            <span data-alertid="first_name"></span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-4 control-label"><span style="color:red;">*</span>  Customer Name</label>
                    <div class="col-md-4 inputGroupContainer">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="cust_name" id="cust_name" placeholder="Customer Name" class="form-control" type="text" required>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-4 control-label"><span style="color:red;">*</span>  Project Name</label>
                    <div class="col-md-4 inputGroupContainer">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input name="project_name" id="project_name" placeholder="Project Name" class="form-control" type="text" required>
                        </div>
                    </div>
                </div>


                <!--<div class="form-group">
                    <label class="col-md-4 control-label">Role</label>
                    <div class="col-md-4 selectContainer">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-list"></i></span>
                            <select name="role" id="role" class="form-control selectpicker" required>
                                <option value="">Select Role</option>
                                <option value="Administrator">Administrator</option>
                                <option value="User">User</option>-->
                @*<option>Auditor</option>*@
                <!--</select>
                        </div>
                    </div>
                </div>-->
                <!-- Text input-->

                <div class="form-group">
                    <label class="col-md-4 control-label"><span style="color:red;">*</span>  Userid</label>
                    <div class="col-md-4 inputGroupContainer">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                            <input name="userid" id="userid" placeholder="Userid" class="form-control" type="email" required>
                        </div>
                    </div>
                </div>

                <!-- Text input-->

                <div class="form-group">
                    <label class="col-md-4 control-label"><span style="color:red;">*</span>  Password</label>
                    <div class="col-md-4 inputGroupContainer">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input name="user_password" type="password" id="user_password" title="Password must contain: Minimum 8 characters atleast 1 Alphabet and 1 Number"
                                   class="form-control" placeholder="Enter Password" required />
                        </div>
                    </div>
                </div>

                <!-- Text input-->

                <div class="form-group">
                    <label class="col-md-4 control-label"><span style="color:red;">*</span>  Confirm Password</label>
                    <div class="col-md-4 inputGroupContainer">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input name="confirm_password" id="confirm_password" placeholder="Confirm Password" class="form-control" required type="password">
                        </div>
                    </div>
                </div>



                <!-- Select Basic -->
                <!-- Success message -->
                @*<div class="alert alert-success" role="alert" id="success_message">Success <i class="glyphicon glyphicon-thumbs-up"></i> Success!.</div>*@

                <!-- Button -->
                <div class="form-group">
                    <div class="col-md-4 control-label">
                        <button type="button" id="btnBack" onclick="@("window.location.href='" + @Url.Action("Login", "Login") + "'");" class="btn btn-warning"><span class="glyphicon glyphicon-arrow-left"></span> BACK</button>
                    </div>
                    <div class="col-md-4 control-label">
                        <button type="submit" class="btn btn-warning">SUBMIT <span class="glyphicon glyphicon-send"></span></button>
                    </div>
                </div>

            </fieldset>
        </form>
    </div>

    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="~/lib/jquery/dist/jquery-confirm.js"></script>

    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.js"></script>

    <script src="~/js/site.js" asp-append-version="true"></script>

</body>
</html>
<script type="text/javascript">
    window.onload = function () {
        var txtPassword = document.getElementById("user_password");
        var txtConfirmPassword = document.getElementById("confirm_password");
        txtPassword.onchange = ConfirmPassword;
        txtConfirmPassword.onkeyup = ConfirmPassword;
        function ConfirmPassword() {
            txtConfirmPassword.setCustomValidity("");
            if (txtPassword.value != txtConfirmPassword.value) {
                txtConfirmPassword.setCustomValidity("Passwords do not match.");
            }
        }
    }

$('#Registration_form').submit(function () {
    var username = $('#first_name').val();
    var custname = $('#cust_name').val();
    var projectname = $('#project_name').val();
    var role = "User"; //$('#role :selected').text();
    var userid = $('#userid').val();
    var password = $('#user_password').val();
    var confrmpassword = $('#confirm_password').val();

    var Projects = [{
        "ProjectName": projectname,
        "CustomerName": custname
    }];

    var UserDetails = {
        "username": userid,
        "password": password,
        "fullName": username,
        "userRole": role,
        "isActive": true,
        "projects": Projects
    }

    var redirecturl = "/Login/signup";
    $.post(redirecturl, UserDetails, function (data) {

        var title = "";
            var type = "";
            if (data.statusCode == true) {
                title = "Success!!";
                type = "green";
            }
            else {
                title = "Error!!";
                type = "red";
            }
            $.alert({
                    title: title,
                    content: data.responseMessage,
                    type: type,
                    onAction: function () {
                        window.location.href = '@Url.Action("Login","Login")';
                    }
                });
        })
        .fail(function (response) {
           $.alert({
                title: 'Error!!',
                content: response,
                alignMiddle: true,
                type: 'red'
            });
        });
    return false;


});
</script>